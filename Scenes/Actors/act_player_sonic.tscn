[gd_scene load_steps=20 format=3 uid="uid://cyjbdi347hyhd"]

[ext_resource type="Script" path="res://Actors/Players/Sonic.cs" id="1_splnw"]
[ext_resource type="AudioStream" uid="uid://c7smi58wkyhhm" path="res://Assets/Audio/Sounds/Metal/snd_jump.wav" id="3_hh371"]
[ext_resource type="AudioStream" uid="uid://bsbgp1csl4cos" path="res://Assets/Audio/Sounds/Metal/snd_spindash_hold.wav" id="3_xb38u"]
[ext_resource type="AudioStream" uid="uid://chgjsejm2jvhc" path="res://Assets/Audio/Sounds/Metal/snd_spindash_release.wav" id="4_nw1sy"]
[ext_resource type="PackedScene" uid="uid://dkcu7fsvcyis3" path="res://Assets/Visual/Models/mdl_metalSonic.blend" id="6_n7joc"]

[sub_resource type="CapsuleShape3D" id="CapsuleShape3D_wa5yb"]
radius = 0.3

[sub_resource type="SphereShape3D" id="SphereShape3D_8e37d"]
radius = 0.58

[sub_resource type="SphereShape3D" id="SphereShape3D_qkshk"]
radius = 0.8

[sub_resource type="CylinderShape3D" id="CylinderShape3D_n7ipb"]
height = 0.1
radius = 0.3

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_3l85c"]
specular_mode = 1
albedo_color = Color(0.241793, 5.10186e-05, 0.8817, 1)
metallic = 1.0
metallic_specular = 0.68
roughness = 0.27

[sub_resource type="SphereMesh" id="SphereMesh_qhobh"]
material = SubResource("StandardMaterial3D_3l85c")
radius = 0.6
height = 1.2
radial_segments = 12
rings = 8

[sub_resource type="Animation" id="Animation_1hce8"]
length = 0.001
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath(".:rotation")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Vector3(0, 0, 0)]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("..:rotation")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Vector3(0, 0, 0)]
}
tracks/2/type = "value"
tracks/2/imported = false
tracks/2/enabled = true
tracks/2/path = NodePath("..:scale")
tracks/2/interp = 1
tracks/2/loop_wrap = true
tracks/2/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Vector3(0.682784, 1.09072, 0.698563)]
}
tracks/3/type = "value"
tracks/3/imported = false
tracks/3/enabled = true
tracks/3/path = NodePath("..:position")
tracks/3/interp = 1
tracks/3/loop_wrap = true
tracks/3/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Vector3(0, -0.161624, -0.247377)]
}

[sub_resource type="Animation" id="Animation_q8sbu"]
resource_name = "speen"
length = 0.35
loop_mode = 1
step = 0.05
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath(".:rotation")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.35),
"transitions": PackedFloat32Array(1, 1),
"update": 0,
"values": [Vector3(0, 0, 0), Vector3(-6.28319, 0, 0)]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("..:position")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0, 0.35),
"transitions": PackedFloat32Array(1, 1),
"update": 0,
"values": [Vector3(0, -0.3, 0), Vector3(0, -0.3, 0)]
}
tracks/2/type = "value"
tracks/2/imported = false
tracks/2/enabled = true
tracks/2/path = NodePath("..:rotation")
tracks/2/interp = 1
tracks/2/loop_wrap = true
tracks/2/keys = {
"times": PackedFloat32Array(0, 0.35),
"transitions": PackedFloat32Array(1, 1),
"update": 0,
"values": [Vector3(0, 0, 0), Vector3(0, 0, 0)]
}
tracks/3/type = "value"
tracks/3/imported = false
tracks/3/enabled = true
tracks/3/path = NodePath("..:scale")
tracks/3/interp = 1
tracks/3/loop_wrap = true
tracks/3/keys = {
"times": PackedFloat32Array(0, 0.35),
"transitions": PackedFloat32Array(1, 1),
"update": 0,
"values": [Vector3(1, 1, 1), Vector3(1, 1, 1)]
}

[sub_resource type="Animation" id="Animation_fpqil"]
resource_name = "speendash"
length = 0.35
loop_mode = 1
step = 0.05
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath(".:rotation")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.35),
"transitions": PackedFloat32Array(1, 1),
"update": 0,
"values": [Vector3(0, 0, 0), Vector3(-6.28319, 0, 0)]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("..:rotation")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0, 0.35),
"transitions": PackedFloat32Array(1, 1),
"update": 0,
"values": [Vector3(0.790791, 0, 0), Vector3(0.790791, 0, 0)]
}
tracks/2/type = "value"
tracks/2/imported = false
tracks/2/enabled = true
tracks/2/path = NodePath("..:scale")
tracks/2/interp = 1
tracks/2/loop_wrap = true
tracks/2/keys = {
"times": PackedFloat32Array(0, 0.35),
"transitions": PackedFloat32Array(1, 1),
"update": 0,
"values": [Vector3(0.8, 1.2, 0.8), Vector3(0.8, 1.2, 0.8)]
}
tracks/3/type = "value"
tracks/3/imported = false
tracks/3/enabled = true
tracks/3/path = NodePath("..:position")
tracks/3/interp = 1
tracks/3/loop_wrap = true
tracks/3/keys = {
"times": PackedFloat32Array(0, 0.35),
"transitions": PackedFloat32Array(1, 1),
"update": 0,
"values": [Vector3(0, -0.161624, -0.247377), Vector3(0, -0.161624, -0.247377)]
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_yjqa6"]
_data = {
"RESET": SubResource("Animation_1hce8"),
"speen": SubResource("Animation_q8sbu"),
"speendash": SubResource("Animation_fpqil")
}

[sub_resource type="CylinderShape3D" id="CylinderShape3D_ytp2g"]
height = 16.0
radius = 10.0

[sub_resource type="ParticleProcessMaterial" id="ParticleProcessMaterial_4pwk4"]
emission_shape_offset = Vector3(0, 10, 0)
emission_shape = 3
emission_box_extents = Vector3(20, 0, 20)
direction = Vector3(-0.5, -1, -0.2)
spread = 0.0
initial_velocity_min = 40.22
initial_velocity_max = 40.22
gravity = Vector3(0, 0, 0)

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_nunea"]
shading_mode = 0
albedo_color = Color(0.31386, 0.370009, 0.592725, 1)
billboard_keep_scale = true

[sub_resource type="QuadMesh" id="QuadMesh_gayre"]
material = SubResource("StandardMaterial3D_nunea")
size = Vector2(0.05, 0.15)

[node name="Sonic" type="CharacterBody3D"]
collision_layer = 2
floor_snap_length = 1.0
script = ExtResource("1_splnw")
animatorPath = NodePath("mdl_metalSonic/AnimationPlayer")
standingColliderPath = NodePath("StandingShape")
ballColliderPath = NodePath("BallShape")
standingModelPath = NodePath("mdl_metalSonic")
ballModelPath = NodePath("Ball")
floorCastPath = NodePath("FloorCast2")
homingAttackAreaPath = NodePath("HomingAttackArea")
spinHoldSoundPath = NodePath("SpinChargeSound")
spinReleaseSoundPath = NodePath("SpinReleaseSound")
jumpSoundPath = NodePath("JumpSound")
startingSpeed = 4.0
joggingSpeed = 15.0
runningSpeed = 25.0
sprintingSpeed = 35.0
maximumSpeed = 75.0
acceleration = 12.0
deceleration = 30.0
airAcceleration = 12.0
airDeceleration = 15.0
turnSpeed = 20.0
turnFriction = 1.0
jumpableStates = [0, 1, 4]
maxJumpHeight = 6.0
bounceVelocity = 22.0
minimumDashSpeed = 15.0
maximumDashSpeed = 55.0
homingAttackableStates = [2, 1, 5, 8]
homingAttackRechargeStates = [0, 3, 4, 8]
homingAttackSpeed = 35.0
homingAttackAccuracy = 22.0
animations = {
"HomingAttackBounce": "HomingAttackBounce",
"Idle": "Idle",
"Jet": "Jet",
"Jog": "Walk",
"Run": "Run",
"SpringJump": "Jump",
"Sprint": "Sprint",
"StandFall": "Fall"
}

[node name="StandingShape" type="CollisionShape3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.2, 0)
shape = SubResource("CapsuleShape3D_wa5yb")

[node name="BallShape" type="CollisionShape3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1.49012e-08, 0)
shape = SubResource("SphereShape3D_8e37d")
disabled = true

[node name="JumpHurtBox" type="Area3D" parent="BallShape"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -1.49012e-08, 0)
collision_layer = 0
collision_mask = 8

[node name="CollisionShape3D" type="CollisionShape3D" parent="BallShape/JumpHurtBox"]
shape = SubResource("SphereShape3D_qkshk")

[node name="FloorCast2" type="ShapeCast3D" parent="."]
shape = SubResource("CylinderShape3D_n7ipb")
target_position = Vector3(0, -1.2, 0)

[node name="mdl_metalSonic" parent="." instance=ExtResource("6_n7joc")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -0.8, 0)

[node name="Skeleton3D" parent="mdl_metalSonic/Armature" index="0"]
bones/1/rotation = Quaternion(2.52221e-08, 0.9997, -0.0245072, -1.02886e-06)
bones/2/rotation = Quaternion(0.493428, 0.138202, 0.855025, 0.0797555)
bones/3/rotation = Quaternion(0.689565, -0.000423187, -0.000401499, 0.724223)
bones/3/scale = Vector3(1, 1, 1)
bones/4/rotation = Quaternion(-0.0245072, -0.00058419, 1.4202e-05, 0.999699)
bones/4/scale = Vector3(1, 1, 1)
bones/5/rotation = Quaternion(0.487597, -0.512104, -0.487596, 0.512103)
bones/5/scale = Vector3(1, 1, 1)
bones/6/rotation = Quaternion(-0.724224, -6.88677e-07, -7.25352e-07, 0.689565)
bones/7/rotation = Quaternion(0.689565, 0.000421679, 0.000402936, 0.724223)
bones/7/scale = Vector3(1, 1, 1)
bones/8/rotation = Quaternion(1.42336e-05, 0.999699, -0.0245072, -0.000582238)
bones/8/scale = Vector3(1, 1, 1)
bones/9/rotation = Quaternion(0.487596, 0.512103, 0.487597, 0.512104)
bones/10/rotation = Quaternion(-0.724224, -6.88677e-07, -7.25352e-07, 0.689565)
bones/11/rotation = Quaternion(-0.722742, -7.11279e-07, -7.43826e-07, 0.691118)
bones/11/scale = Vector3(1, 1, 1)
bones/12/rotation = Quaternion(-0.00214584, 1.56563e-13, -1.13351e-13, 0.999998)
bones/12/scale = Vector3(1, 1, 1)
bones/14/scale = Vector3(1, 1, 1)
bones/15/rotation = Quaternion(0.0329445, 0.0659572, 0.00487374, 0.997267)
bones/15/scale = Vector3(1, 1, 1)
bones/17/rotation = Quaternion(0.0529414, -0.105444, 0.00132227, 0.993014)
bones/18/rotation = Quaternion(0.0329445, -0.0659594, -0.00487356, 0.997266)
bones/19/rotation = Quaternion(0.64947, 0.00726053, -0.0138917, 0.760226)
bones/19/scale = Vector3(1, 1, 1)
bones/20/rotation = Quaternion(0.101596, 0.00203515, -0.00527118, 0.99481)
bones/21/rotation = Quaternion(-0.565464, -0.414161, 0.293566, 0.650031)
bones/21/scale = Vector3(1, 1, 1)
bones/22/rotation = Quaternion(0.64947, -0.0072621, 0.0138931, 0.760226)
bones/22/scale = Vector3(1, 1, 1)
bones/23/rotation = Quaternion(0.101596, -0.00203515, 0.00527118, 0.99481)

[node name="AnimationPlayer" parent="mdl_metalSonic" index="1"]
autoplay = "Idle"

[node name="Ball" type="Node3D" parent="."]
visible = false

[node name="Ball" type="Node3D" parent="Ball"]
transform = Transform3D(0.682784, 0, 0, 0, 1.09072, 0, 0, 0, 0.698563, 0, -0.161624, -0.247377)

[node name="Ball" type="MeshInstance3D" parent="Ball/Ball"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.3, 0)
mesh = SubResource("SphereMesh_qhobh")
skeleton = NodePath("../../..")

[node name="AnimationPlayer" type="AnimationPlayer" parent="Ball/Ball/Ball"]
libraries = {
"": SubResource("AnimationLibrary_yjqa6")
}
autoplay = "speen"

[node name="JumpSound" type="AudioStreamPlayer" parent="."]
stream = ExtResource("3_hh371")

[node name="SpinChargeSound" type="AudioStreamPlayer" parent="."]
stream = ExtResource("3_xb38u")

[node name="SpinReleaseSound" type="AudioStreamPlayer" parent="."]
stream = ExtResource("4_nw1sy")

[node name="HomingAttackArea" type="Area3D" parent="."]
collision_layer = 0
collision_mask = 4

[node name="CollisionShape3D" type="CollisionShape3D" parent="HomingAttackArea"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -6.5, 0)
shape = SubResource("CylinderShape3D_ytp2g")

[node name="GPUParticles3D" type="GPUParticles3D" parent="."]
amount = 1000
lifetime = 2.0
visibility_aabb = AABB(-10, -10, -10, 20, 20, 20)
transform_align = 3
process_material = SubResource("ParticleProcessMaterial_4pwk4")
draw_pass_1 = SubResource("QuadMesh_gayre")

[connection signal="body_entered" from="BallShape/JumpHurtBox" to="." method="OnBallHurtBoxEntered"]

[editable path="mdl_metalSonic"]
